<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Recuperar Contraseña - EDÉN Inmobiliaria</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
</head>
<body>
<div class="recovery-container">
  <div class="back-button">
    <button type="button" routerLink="/login" class="btn btn-outline-secondary" onclick="window.history.back()">
      <i class="bi bi-arrow-left"></i> Volver
    </button>
  </div>

  <div class="recovery-header">
    <div class="recovery-icon">
      <i class="bi bi-shield-lock"></i>
    </div>
    <h2>EDÉN</h2>
    <p>Recuperar contraseña</p>
  </div>

  <div class="step-indicator">
    <div class="step active">1</div>
    <div class="step">2</div>
    <div class="step">3</div>
  </div>

  <!-- Paso 1: Ingresar correo -->
  <div id="step1">
    <form>
      <div class="mb-3">
        <label for="email" class="form-label">CORREO ELECTRÓNICO</label>
        <input type="email" class="form-control" id="email" placeholder="ejemplo@correo.com" required>
      </div>

      <button type="button" class="btn btn-primary" onclick="showStep(2)">ENVIAR CÓDIGO</button>
    </form>

    <div class="recovery-footer">
      <p>¿Recuerdas tu contraseña? <a routerLink="/login">Inicia sesión aquí</a></p>
    </div>
  </div>

  <!-- Paso 2: Ingresar código -->
  <div id="step2">
    <p class="text-center mb-4">Hemos enviado un código de verificación a tu correo electrónico. Introdúcelo a continuación.</p>

    <div class="code-inputs">
      <input type="text" class="code-input" maxlength="1" onkeyup="moveToNext(this, 1)">
      <input type="text" class="code-input" maxlength="1" onkeyup="moveToNext(this, 2)">
      <input type="text" class="code-input" maxlength="1" onkeyup="moveToNext(this, 3)">
      <input type="text" class="code-input" maxlength="1" onkeyup="moveToNext(this, 4)">
      <input type="text" class="code-input" maxlength="1" onkeyup="moveToNext(this, 5)">
      <input type="text" class="code-input" maxlength="1" onkeyup="moveToNext(this, 6)">
    </div>

    <div class="d-flex justify-content-between mb-4">
      <span>¿No recibiste el código?</span>
      <a href="#" class="text-primary">Reenviar código</a>
    </div>

    <button type="button" class="btn btn-primary" onclick="showStep(3)">VERIFICAR CÓDIGO</button>
  </div>

  <!-- Paso 3: Nueva contraseña -->
  <div id="step3">
    <form>
      <div class="mb-3">
        <label for="newPassword" class="form-label">NUEVA CONTRASEÑA</label>
        <div class="password-toggle">
          <input type="password" class="form-control" id="newPassword" placeholder="Crea una contraseña segura" required>
          <span class="password-toggle-icon" id="toggleNewPassword">
                            <i class="bi bi-eye"></i>
                        </span>
        </div>
      </div>

      <div class="mb-3">
        <label for="confirmNewPassword" class="form-label">CONFIRMAR CONTRASEÑA</label>
        <div class="password-toggle">
          <input type="password" class="form-control" id="confirmNewPassword" placeholder="Repite tu contraseña" required>
          <span class="password-toggle-icon" id="toggleConfirmNewPassword">
                            <i class="bi bi-eye"></i>
                        </span>
        </div>
      </div>

      <div class="mb-3">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" id="termsCheck" required>
          <label class="form-check-label" for="termsCheck">
            Acepto los <a href="#">términos y condiciones</a>
          </label>
        </div>
      </div>

      <button type="button" class="btn btn-primary" onclick="resetPassword()">RESTABLECER CONTRASEÑA</button>
    </form>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Mostrar/ocultar pasos del proceso
  function showStep(stepNumber) {
    document.getElementById('step1').style.display = 'none';
    document.getElementById('step2').style.display = 'none';
    document.getElementById('step3').style.display = 'none';

    document.getElementById('step' + stepNumber).style.display = 'block';

    // Actualizar indicador de pasos
    const steps = document.querySelectorAll('.step');
    steps.forEach((step, index) => {
      if (index + 1 <= stepNumber) {
        step.classList.add('active');
      } else {
        step.classList.remove('active');
      }
    });
  }

  // Mover al siguiente campo de código
  function moveToNext(current, next) {
    if (current.value.length === 1) {
      if (next <= 6) {
        document.querySelectorAll('.code-input')[next].focus();
      }
    }
  }

  // Funcionalidad para mostrar/ocultar contraseña
  document.getElementById('toggleNewPassword').addEventListener('click', function() {
    const passwordInput = document.getElementById('newPassword');
    const icon = this.querySelector('i');

    if (passwordInput.type === 'password') {
      passwordInput.type = 'text';
      icon.classList.remove('bi-eye');
      icon.classList.add('bi-eye-slash');
    } else {
      passwordInput.type = 'password';
      icon.classList.remove('bi-eye-slash');
      icon.classList.add('bi-eye');
    }
  });

  document.getElementById('toggleConfirmNewPassword').addEventListener('click', function() {
    const confirmPasswordInput = document.getElementById('confirmNewPassword');
    const icon = this.querySelector('i');

    if (confirmPasswordInput.type === 'password') {
      confirmPasswordInput.type = 'text';
      icon.classList.remove('bi-eye');
      icon.classList.add('bi-eye-slash');
    } else {
      confirmPasswordInput.type = 'password';
      icon.classList.remove('bi-eye-slash');
      icon.classList.add('bi-eye');
    }
  });

  // Validación y envío del formulario
  function resetPassword() {
    const newPassword = document.getElementById('newPassword').value;
    const confirmPassword = document.getElementById('confirmNewPassword').value;

    if (newPassword !== confirmPassword) {
      alert('Las contraseñas no coinciden. Por favor, verifica.');
      return;
    }

    // Aquí iría la lógica para enviar los datos al servidor
    alert('¡Contraseña restablecida exitosamente!');
    // Redirigir al login después de un breve retraso
    setTimeout(() => {
      window.location.href = 'login.html';
    }, 1500);
  }

  // Auto-focus en el primer campo de código
  document.addEventListener('DOMContentLoaded', function() {
    const codeInputs = document.querySelectorAll('.code-input');
    if (codeInputs.length > 0) {
      codeInputs[0].focus();
    }
  });
</script>
</body>
</html>
